import React from "react"
import { motion } from "framer-motion"

const frameworkIcons: Record<string, { path: string; viewBox?: string; color?: string; label?: string }> = {
  express: {
    path: "M11.87 0c-6.56 0-11.87 5.31-11.87 11.87s5.31 11.87 11.87 11.87 11.87-5.31 11.87-11.87S18.43 0 11.87 0zm4.98 17.21L14.4 13l-2.53 4.21H9.74L13 11.72 9.89 6.53h2.12L14.53 11l2.53-4.47h2.12l-3.11 5.19 3.26 5.49z",
    viewBox: "0 0 24 24",
    color: "#fafafa",
    label: "Express",
  },
  react: {
    path: "M14.977 14.811c-.156.28-.319.556-.487.83l2.747 4.77c.278-.488.521-.994.733-1.52zM9.024 14.81 6.074 18.887c.212.526.455 1.032.733 1.52l2.747-4.769a15.13 15.13 0 0 1-.53-.828zm7.33-4.499c.094.297.18.595.257.896l3.897-.003a11.87 11.87 0 0 0-.706-2.341l-2.829 1.448a12.84 12.84 0 0 1 .62 1.156zm-10.687 0a12.88 12.88 0 0 1 .62-1.156L3.458 8.863a11.865 11.865 0 0 0-.706 2.341h3.897c.077-.3.163-.599.258-.896zM12 .207c-.69 0-1.373.044-2.047.128l1.044 3.758c.328-.022.656-.033.984-.033.327 0 .655.011.983.033L14.047.335A12.15 12.15 0 0 0 12 .207zm-2.085 5.4L8.21 1.51a11.905 11.905 0 0 0-3.238 1.871l2.85 2.847a12.954 12.954 0 0 1 2.093-.619zm4.17 0c.717.148 1.42.36 2.092.619l2.85-2.847A11.904 11.904 0 0 0 15.79 1.51l-1.125 4.097zm-5.2 1.782-2.85-2.847A11.92 11.92 0 0 0 3.793 7.52l3.356 1.232c.186-.4.385-.793.597-1.183zm6.226 0c.212.39.41.783.596 1.183l3.356-1.232a11.92 11.92 0 0 0-1.264-2.978zm-4.493 1.38-3.356-1.232a11.93 11.93 0 0 0-.704 3.163l3.917-.003c.025-.314.061-.628.112-.942zm2.76 0c.052.314.088.628.112.942l3.917.003a11.93 11.93 0 0 0-.704-3.163zm-3.53 2.93-3.918.002a11.93 11.93 0 0 0 .705 3.164l3.355-1.233a11.558 11.558 0 0 1-.112-.934zm4.3 0c-.025.314-.061.627-.112.934l3.355 1.233a11.93 11.93 0 0 0 .705-3.164zM9.91 14.0a10.82 10.82 0 0 1-.596 1.182l-3.356 1.232a11.92 11.92 0 0 0 1.264 2.979l2.85-2.848a12.87 12.87 0 0 1-.162-.255zm4.18 0c-.053.087-.107.172-.162.256l2.85 2.847a11.92 11.92 0 0 0 1.264-2.979l-3.356-1.232zM11 15.3c-.328.022-.656.033-.983.033-.327 0-.655-.011-.983-.033L9.953 19.1c.674.084 1.357.128 2.047.128.689 0 1.372-.044 2.046-.128L13.037 15.3c-.328.022-.656.033-.984.033zm1-3.3a1 1 0 1 1-2 0a1 1 0 0 1 2 0z",
    viewBox: "0 0 24 24",
    color: "#61dafb",
    label: "React",
  },
  django: {
    path: "M11.146 0h3.924v18.166c-2.013.382-3.491.535-5.096.535-4.791 0-7.288-2.166-7.288-6.32 0-4.002 2.65-6.6 6.753-6.6.637 0 1.121.05 1.707.203zm0 9.143a3.894 3.894 0 00-1.325-.204c-1.988 0-3.134 1.223-3.134 3.365 0 2.09 1.096 3.236 3.109 3.236.433 0 .79-.025 1.35-.102V9.142zM21.314 6.06v9.098c0 3.134-.229 4.638-.917 5.937-.637 1.249-1.478 2.039-3.211 2.905l-3.644-1.733c1.733-.815 2.574-1.53 3.109-2.625.561-1.121.739-2.421.739-5.835V6.059h3.924zM17.39.021h3.924v4.026H17.39z",
    viewBox: "0 0 24 24",
    color: "#ffffff",
    label: "Django",
  },
  flask: {
    path: "M10.773 2.878c-.013 1.434.322 4.624.445 5.734l-8.558 3.83c-.56-.959-.98-2.304-1.237-3.38l-.06.027c-.205.09-.406.053-.494-.088l-.011-.018-.82-1.506c-.058-.105-.05-.252.024-.392a.78.78 0 0 1 .358-.331l9.824-4.207c.146-.064.299-.063.4.004.106.062.127.128.13.327Zm.68 7c.523 1.97.675 2.412.832 2.818l-7.263 3.7a19.35 19.35 0 0 1-1.81-2.83l8.24-3.689Zm12.432 8.786h.003c.283.402-.047.657-.153.698l-.947.37c.037.125.035.319-.217.414l-.736.287c-.229.09-.398-.059-.42-.2l-.025-.125c-4.427 1.784-7.94 1.685-10.696.647-1.981-.745-3.576-1.983-4.846-3.379l6.948-3.54c.721 1.431 1.586 2.454 2.509 3.178 2.086 1.638 4.415 1.712 5.793 1.563l-.047-.233c-.015-.077.007-.135.086-.165l.734-.288a.302.302 0 0 1 .342.086l.748-.288a.306.306 0 0 1 .341.086l.583.89Z",
    viewBox: "0 0 24 24",
    color: "#3BABC3",
    label: "Flask",
  },
  fastapi: {
    path: "M12 .0387C5.3729.0384.0003 5.3931 0 11.9988c-.001 6.6066 5.372 11.9628 12 11.9625 6.628.0003 12.001-5.3559 12-11.9625-.0003-6.6057-5.3729-11.9604-12-11.96m-.829 5.4153h7.55l-7.5805 5.3284h5.1828L5.279 18.5436q2.9466-6.5444 5.892-13.0896",
    viewBox: "0 0 24 24",
    color: "#009688",
    label: "FastAPI",
  },
  rails: {
    path: "M.741 19.365h8.36s-1.598-7.291 3.693-10.243l.134-.066c1.286-.637 4.907-2.431 10.702 1.854.19-.159.37-.286.37-.286s-5.503-5.492-11.63-4.878c-3.079.275-6.867 3.079-9.09 6.783C1.058 16.233.741 19.365.741 19.365Zm8.804-.783a10.682 10.682 0 0 1-.127-1.333l1.143.412c.063.498.159.963.254 1.376l-1.27-.455Zm-7.799-4.317L.529 13.82c-.201.455-.423.984-.529 1.27l1.217.444c.137-.359.36-.878.529-1.269Zm7.831.296.857.677c.042-.413.116-.825.222-1.238l-.762-.603c-.137.391-.233.783-.317 1.164Zm2.042-2.646-.508-.762c.191-.243.413-.486.656-.709l.476.72a5.958 5.958 0 0 0-.624.751ZM4.19 8.878l.752.656c-.254.265-.498.551-.72.836l-.815-.698c.244-.265.508-.529.783-.794Zm9.799 1.027-.243-.73c.265-.117.571-.233.931-.339l.233.698a6.82 6.82 0 0 0-.921.371Zm3.122-.656.042-.667c.339.021.688.064 1.048.138l-.042.656a5.859 5.859 0 0 0-1.048-.127ZM8.942 6.392l-.476-.731c-.265.138-.54.286-.826.455l.487.741c.275-.169.54-.328.815-.465Zm9.217-.053.042-.709c-.095-.053-.36-.18-1.026-.371l-.043.699c.349.116.688.243 1.027.381ZM13.238 5.28h.106l-.212-.645c-.328 0-.666.021-1.016.063l.201.625a8.87 8.87 0 0 1 .921-.043Z",
    viewBox: "0 0 24 24",
    color: "#D30001",
    label: "Ruby on Rails",
  },
  spring: {
    path: "m23.693 10.7058-4.73-8.1844c-.4094-.7106-1.4166-1.2942-2.2402-1.2942H7.2725c-.819 0-1.8308.5836-2.2402 1.2942L.307 10.7058c-.4095.7106-.4095 1.873 0 2.5837l4.7252 8.189c.4094.7107 1.4166 1.2943 2.2402 1.2943h9.455c.819 0 1.826-.5836 2.2402-1.2942l4.7252-8.189c.4095-.7107.4095-1.8732 0-2.5838zM10.9763 5.7547c0-.5365.4377-.9742.9742-.9742s.9742.4377.9742.9742v5.8217c0 .5366-.4377.9742-.9742.9742s-.9742-.4376-.9742-.9742zm.9742 12.4294c-3.6427 0-6.6077-2.965-6.6077-6.6077.0047-2.0896.993-4.0521 2.6685-5.304a.8657.8657 0 0 1 1.2142.1788.8657.8657 0 0 1-.1788 1.2143c-2.1602 1.6048-2.612 4.6592-1.0072 6.8194 1.6049 2.1603 4.6593 2.612 6.8195 1.0072 1.2378-.9177 1.9673-2.372 1.9673-3.9157a4.8972 4.8972 0 0 0-1.9861-3.925c-.386-.2824-.466-.8284-.1836-1.2143.2824-.386.8283-.466 1.2143-.1835 1.6895 1.2471 2.6826 3.2238 2.6873 5.3228 0 3.6474-2.965 6.6077-6.6077 6.6077z",
    viewBox: "0 0 24 24",
    color: "#6DB33F",
    label: "Spring Boot",
  },
  nextjs: {
    path: "M18.665 21.978C16.758 23.255 14.465 24 12 24 5.377 24 0 18.623 0 12S5.377 0 12 0s12 5.377 12 12c0 3.583-1.574 6.801-4.067 9.001L9.219 7.2H7.2v9.596h1.615V9.251l9.85 12.727Zm-3.332-8.533 1.6 2.061V7.2h-1.6v6.245Z",
    viewBox: "0 0 24 24",
    color: "#ffffff",
    label: "Next.js",
  },
}

interface FrameworkBadgeProps {
  framework?: string | null
  className?: string
  showLabel?: boolean
}

export function FrameworkBadge({ framework, className = "", showLabel = true }: FrameworkBadgeProps) {
  if (!framework) return null

  const normalize = (fw: string) => {
    const lower = fw.toLowerCase().replace(/\s+/g, "")
    if (lower === "express.js" || lower === "expressjs") return "express"
    if (lower === "next.js" || lower === "nextjs") return "nextjs"
    if (lower === "react.js" || lower === "reactjs") return "react"
    if (lower === "rubyonrails") return "rails"
    if (lower === "springboot") return "spring"
    return lower
  }

  const key = normalize(framework)
  const icon = frameworkIcons[key]
  const isExpress = key === "express"

  return (
    <motion.div
      layout
      className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-white/10 border border-white/15 ${className}`}
      whileHover={{ scale: 1.03 }}
      whileTap={{ scale: 0.97 }}
    >
      {isExpress ? (
        <span className="inline-flex h-4 w-4 items-center justify-center rounded-full bg-white text-[9px] font-semibold text-black">
          Ex
        </span>
      ) : icon ? (
        <svg
          width={14}
          height={14}
          viewBox={icon.viewBox || "0 0 24 24"}
          fill={icon.color || "currentColor"}
          aria-hidden
          focusable="false"
          className="shrink-0"
        >
          <path d={icon.path} />
        </svg>
      ) : (
        <span className="inline-block h-2 w-2 rounded-full bg-emerald-300" />
      )}
      {showLabel && (
        <span className="text-[10px] font-medium capitalize text-white/80">{icon?.label || framework}</span>
      )}
    </motion.div>
  )
}
